<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Logi Play</title>
    <link rel="icon" href="static/images/logo.png" type="image/jpeg">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: url('static/images/1567665.png') no-repeat center center fixed;
            background-size: cover;
            color: white;
            text-align: center;
            overflow-y: scroll; /* force scrollbar */
        }

        /* ðŸ”¹ Custom slim scrollbar (Chrome, Edge, Safari) */
        body::-webkit-scrollbar {
            width: 8px;
        }
        body::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.6);
        }
        body::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }
        body::-webkit-scrollbar-thumb:hover {
            background: #888;
        }

        h1 {
            margin-top: 30px;
            font-size: 3em;
            text-decoration: underline;
            text-shadow: 
                -2px -2px 0 black,
                2px -2px 0 black,
               -2px  2px 0 black,
                2px  2px 0 black;
            display: inline-block;
        }

        .logo {
            vertical-align: middle;
            height: 60px;
            margin-left: 5px;
        }

        p {
            font-size: 1.2em;
            margin: 15px 0 30px;
        }

        .caption {
            font-size: 1em;
            color: #aaa;
            margin-bottom: 15px;
        }

        /* ðŸ”¹ ROM drop box */
        #emu-box {
            margin: 0 auto 40px;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            border: 3px dashed #ccc;
            border-radius: 10px;
            background-color: #222;
            position: relative;
            cursor: pointer;
        }

        #input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        #emu-box:hover {
            border-color: #38f;
            background-color: #333;
        }

        /* ðŸ”¹ Emulator display box */
        #game {
            margin: 20px auto 0;
            width: 60%;
            height: 480px;
            background: black;
            border: 3px solid;
            border-image: linear-gradient(90deg, white, black) 1;
            border-radius: 0;
        }

        /* ðŸ”¹ Nav styling */
        .nav {
            position: absolute;
            top: 15px;
            right: 20px;
        }

        .nav a {
            color: #38f;
            text-decoration: none;
            font-size: 1.2em;
            font-weight: bold;
        }

        .nav a:hover {
            text-decoration: underline;
        }

        /* ðŸ”¹ Extra content to extend the page */
        .extra {
            margin: 80px auto;
            width: 70%;
            padding: 30px;
            font-size: 1.2em;
            background: rgba(0,0,0,0.5);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    
    <h1>Logi Play <img src="static/images/logo.png" alt="Logo" class="logo"></h1>
    <p class="caption">
        Only use ROMs that you own. Inspired by <a href="https://emulatorjs.org/" target="_blank" style="color: #38f;">EmulatorJS</a>.
    </p>
    <p>Drop a ROM below (GBA, SNES, etc)</p>

    <div id="emu-box">
        <input type="file" id="input">
        Drag ROM file or click here
    </div>

    <div id="game"></div>

    <!-- ðŸ”¹ Extra scrollable content -->
    <div class="extra">
        <h2>About Logi Play</h2>
        <p>
            Logi Play is your space for exploring retro games directly in the browser.  
            Load your own ROMs, enjoy smooth emulation, and relive classics anywhere.  
            We believe in preserving games while respecting ownership, so please use only ROMs you legally own.
        </p>
        <p>
            Scroll to see more updates soon. This is just the beginning of Logi Play ðŸš€
        </p>
    </div>

    <script>
        const input = document.getElementById("input");

        input.addEventListener("change", async () => {
            const romFile = input.files[0];
            const fileName = romFile.name;
            const parts = fileName.split(".");
            const ext = parts.pop().toLowerCase();
            const name = parts.join(".");

            const coreMap = {
                gba: "gba", gb: "gb", gbc: "gb",
                nes: "nes", smc: "snes", sfc: "snes", fig: "snes",
                n64: "n64", z64: "n64", nds: "nds",
                bin: "gen", gen: "gen", sega: "gen"
            };

            const core = coreMap[ext] || "gba";

            console.log("File selected:", fileName);
            console.log("Extension:", ext);
            console.log("Mapped Core:", core);

            const reader = new FileReader();

            reader.onload = function () {
                const blobURL = URL.createObjectURL(new Blob([reader.result]));

                const script = document.createElement("script");
                script.src = "https://cdn.emulatorjs.org/stable/data/loader.js";
                script.onerror = () => alert("EmulatorJS failed to load. Check your internet connection.");
                document.body.appendChild(script);

                window.EJS_player = "#game";
                window.EJS_gameUrl = blobURL;
                window.EJS_gameName = name;
                window.EJS_core = core;
                window.EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";
                window.EJS_startOnLoaded = true;
                window.EJS_threads = (core === "nds" || core === "psp");
            };

            reader.readAsArrayBuffer(romFile);
        });
    </script>
</body>
</html>
